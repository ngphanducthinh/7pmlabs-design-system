import{j as ee,b,k as n,C as R,E as ae,g as se,d as $,q as te,l as i,n as w,t as oe,m as I,s as de,u as ne,o as M,H as T}from"./vue.esm-bundler-d836205b.js";import{I as c}from"./imask-7.1.3-80c1e5b4.js";import{A as re,c as le,m as u}from"./DateHelper-87bc46a3.js";import{u as ie}from"./vue-i18n.esm-bundler-b6b8dfca.js";import{u as ce}from"./Validation-68c07edf.js";import{D as H}from"./Common-43134899.js";import{d as A}from"./Enums-6a2836ab.js";import{u as Y,l as ue}from"./ComponentHelper-d29c08d8.js";import{_ as me}from"./BErrorMessage-3ca20143.js";import{_ as pe}from"./BLabel-04f8c997.js";import{v as fe}from"./v4-a960c1f4.js";import"./_commonjsHelpers-725317a4.js";import"./_commonjs-dynamic-modules-302442b1.js";const be={class:"ds-relative"},ye=["id","disabled","placeholder"],ke=["id","disabled"],he=["for"],_e=["for"],q=ee({__name:"BDatePicker",props:{inputId:{default:""},modelValue:{},label:{default:""},validationRules:{default:void 0},placeholder:{default:""},required:{type:Boolean,default:!1},requiredErrorMessage:{default:""},disabled:{type:Boolean,default:!1},inputCssClass:{default:""},minDate:{default:""},maxDate:{default:""},showHintToday:{type:Boolean,default:!1},view:{default:A.Days},hideDetails:{type:Boolean,default:!1},position:{default:"bottom left"}},emits:["update:modelValue"],setup(y,{emit:r}){const s=y,{t:a,locale:O}=ie(),m=`DD${H}MM${H}YYYY`,k=new Date;let o,l;const x=b(null),z={validateRule:e=>!!e,errorMessage:()=>s.requiredErrorMessage||a("ds.global.field_required")},h=b(),d=n(()=>s.inputId||`id-${fe()}`),B=n({get(){return s.modelValue},set(e){r("update:modelValue",e)}}),E=n(()=>[{content:a("ds.components.base.date_picker.buttons.cancel"),className:"ds-bg-transparent focus:ds-ring-1 focus:ds-ring-gray-300 ds-border-inner-primary-f !ds-text-primary-t hover:ds-bg-[#e6f0fe] ds-text-sm ds-leading-4 ds-px-4 ds-mx-1",onClick:e=>{e.clear(),T(()=>{v()}),e.hide()}},{content:a("ds.components.base.date_picker.buttons.confirm"),className:`${d.value}-btn-confirm focus:ds-ring-1 focus:ds-ring-1 focus:ds-ring-blue-300 ds-bg-gradient-to-r ds-from-primary-f-stop ds-from-primary-f ds-to-primary-t !ds-text-white enabled:hover:ds-bg-[#0e4bbd] ds-text-sm ds-leading-4 ds-px-4 disabled:ds-from-[#e2e4e8] disabled:ds-to-[#e2e4e8] disabled:ds-text-black/[0.4] ds-mx-1`,onClick:e=>{B.value=h.value!==void 0?h.value:"",T(()=>{v()}),e.hide()},attrs:s.required?{disabled:""}:void 0}]),P=n(()=>{const e={days:[a("ds.components.base.date_picker.days.sunday"),a("ds.components.base.date_picker.days.monday"),a("ds.components.base.date_picker.days.tuesday"),a("ds.components.base.date_picker.days.wednesday"),a("ds.components.base.date_picker.days.thursday"),a("ds.components.base.date_picker.days.friday"),a("ds.components.base.date_picker.days.saturday")],daysShort:[a("ds.components.base.date_picker.days_short.sunday"),a("ds.components.base.date_picker.days_short.monday"),a("ds.components.base.date_picker.days_short.tuesday"),a("ds.components.base.date_picker.days_short.wednesday"),a("ds.components.base.date_picker.days_short.thursday"),a("ds.components.base.date_picker.days_short.friday"),a("ds.components.base.date_picker.days_short.saturday")],daysMin:[a("ds.components.base.date_picker.days_min.sunday"),a("ds.components.base.date_picker.days_min.monday"),a("ds.components.base.date_picker.days_min.tuesday"),a("ds.components.base.date_picker.days_min.wednesday"),a("ds.components.base.date_picker.days_min.thursday"),a("ds.components.base.date_picker.days_min.friday"),a("ds.components.base.date_picker.days_min.saturday")],months:[a("ds.components.base.date_picker.months.january"),a("ds.components.base.date_picker.months.february"),a("ds.components.base.date_picker.months.march"),a("ds.components.base.date_picker.months.april"),a("ds.components.base.date_picker.months.may"),a("ds.components.base.date_picker.months.june"),a("ds.components.base.date_picker.months.july"),a("ds.components.base.date_picker.months.august"),a("ds.components.base.date_picker.months.september"),a("ds.components.base.date_picker.months.october"),a("ds.components.base.date_picker.months.november"),a("ds.components.base.date_picker.months.december")],monthsShort:[a("ds.components.base.date_picker.months_short.january"),a("ds.components.base.date_picker.months_short.february"),a("ds.components.base.date_picker.months_short.march"),a("ds.components.base.date_picker.months_short.april"),a("ds.components.base.date_picker.months_short.may"),a("ds.components.base.date_picker.months_short.june"),a("ds.components.base.date_picker.months_short.july"),a("ds.components.base.date_picker.months_short.august"),a("ds.components.base.date_picker.months_short.september"),a("ds.components.base.date_picker.months_short.october"),a("ds.components.base.date_picker.months_short.november"),a("ds.components.base.date_picker.months_short.december")],today:a("ds.components.base.date_picker.buttons.today"),clear:a("ds.components.base.date_picker.buttons.clear"),dateFormat:"dd/MM/yyyy",timeFormat:"HH:mm",firstDay:1},t=({date:p})=>{h.value=p,s.required&&Z(!!p)};return{locale:e,selectedDates:[s.modelValue],onSelect:t,buttons:[...E.value],showOtherMonths:!1,timepicker:!1,onlyTimepicker:!1,minDate:s.minDate,maxDate:s.maxDate,view:s.view,onHide:J,onShow:K,navTitles:{days:"MMMM yyyy"},position:s.position}}),L=n(()=>{let e=[];return s.required&&e.push(z),s.validationRules&&(e=e.concat(s.validationRules)),e.length?e:void 0}),C=n(()=>["ds-border ds-rounded-lg ds-block ds-w-full ds-text-sm ds-px-3 ds-h-[40px]",{"ds-cursor-not-allowed ds-bg-[#f2f2f2] ds-text-black/[0.4]":s.disabled,"ds-text-black/[0.85]":!s.disabled,"ds-border-error focus:ds-ring-1 focus:ds-ring-error":!g.value.valid,"ds-border-black/[0.1] focus:ds-border-focus focus:ds-ring-1 focus:ds-ring-focus":g.value.valid,"!ds-border-focus ds-ring-1 ds-ring-focus":_.value},s.inputCssClass]),U=n(()=>s.modelValue?k.getDate()===s.modelValue.getDate()&&k.getMonth()===s.modelValue.getMonth()&&k.getFullYear()===s.modelValue.getFullYear():!1),G=n(()=>{const e={mask:c.MaskedDate,pattern:m,lazy:!0,format:t=>u(t).format(m),parse:t=>u(t,m),blocks:{YYYY:{mask:c.MaskedRange,from:1,to:9999},MM:{mask:c.MaskedRange,from:1,to:12},DD:{mask:c.MaskedRange,from:1,to:31}}};return s.minDate&&(e.min=s.minDate),s.maxDate&&(e.max=s.maxDate),e}),_=b(!1),{validate:v,validationResult:g}=ce(d.value,B,L.value);R(()=>s.modelValue,()=>{D(o.selectedDates[0])&&(s.modelValue?(o.selectDate(s.modelValue),o.setViewDate(s.modelValue)):o.clear()),D(V())&&(l.value=S(s.modelValue))},{deep:!0}),R([O,()=>s.position,()=>s.minDate,()=>s.maxDate,()=>s.view],()=>{o.update(P.value)});const S=e=>le(e)?u(e).format(m):e,J=()=>{_.value=!1,Y()},K=()=>{_.value=!0,s.modelValue?(o.selectDate(s.modelValue),o.setViewDate(s.modelValue)):o.clear(),ue()},Q=()=>{l.unmaskedValue||r("update:modelValue","")},W=()=>{const e=V();return e?r("update:modelValue",e):r("update:modelValue","")},X=()=>{const e=V();v(),D(e)&&r("update:modelValue",e===void 0?"":e)},D=e=>[!s.modelValue&&e,!e&&s.modelValue,s.modelValue&&e&&s.modelValue.getTime()!==e.getTime()].some(p=>p),V=()=>{const e=l.value.split("/"),t=`${e[2]}-${e[1]}-${e[0]}`;if(u(t,u.ISO_8601,!0).isValid())return new Date(t)},Z=e=>{const t=document.querySelector(`.${d.value}-btn-confirm`);e?t==null||t.removeAttribute("disabled"):t==null||t.setAttribute("disabled","")};return ae(()=>{o=new re(`#${d.value}Picker`,P.value),l=c(x.value,G.value),l.value=S(s.modelValue),l.on("accept",Q),l.on("complete",W)}),se(()=>{Y()}),(e,t)=>(M(),$("div",null,[te(pe,{id:d.value,label:e.label,required:e.required},null,8,["id","label","required"]),i("div",be,[i("input",{id:d.value,ref_key:"inputMaskRef",ref:x,class:w([C.value,"ds-relative ds-z-[2] ds-drop-shadow-light"]),disabled:e.disabled,placeholder:e.placeholder,onBlur:X},null,42,ye),i("input",{id:`${d.value}Picker`,class:w([C.value,"ds-absolute ds-top-0 ds-z-[1]"]),disabled:e.disabled,readonly:""},null,10,ke),e.showHintToday&&U.value?(M(),$("label",{key:0,for:d.value,class:"ds-absolute ds-left-[98px] ds-top-2.5 ds-z-[3] ds-text-sm"},oe(`(${e.$t("ds.components.base.date_picker.today")})`),9,he)):I("",!0),i("label",{for:`${d.value}Picker`,class:"ds-absolute ds-right-3 ds-top-2 ds-z-[3]"},[i("i",{class:w([[s.disabled?"ds-text-black/[0.4]":"ds-text-black/[0.85]"],"fa-solid fa-calendar-lines"])},null,2)],8,_e)]),e.hideDetails?I("",!0):(M(),de(me,{key:0,"error-message":ne(g).errorMessage(),class:"ds-mt-1","prepend-icon":"fa-solid fa-circle-exclamation"},null,8,["error-message"]))]))}});q.__docgenInfo={exportName:"default",displayName:"BDatePicker",description:"",tags:{},props:[{name:"inputId",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"modelValue",required:!0,type:{name:"any"}},{name:"label",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"validationRules",description:"Array of custom validation rules.",required:!1,type:{name:"Array",elements:[{name:"ValidationRule"}]},defaultValue:{func:!1,value:"undefined"}},{name:"placeholder",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"required",description:"Validate if the field is left empty.",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"requiredErrorMessage",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"inputCssClass",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"minDate",description:"Minimum selectable date",required:!1,type:{name:"any"},defaultValue:{func:!1,value:"''"}},{name:"maxDate",description:"Maximum selectable date",required:!1,type:{name:"any"},defaultValue:{func:!1,value:"''"}},{name:"showHintToday",description:'Show "Today" text if selected date is the current date',required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"view",description:"Default view mode when open picker dropdown",required:!1,type:{name:"BDatePickerView"},defaultValue:{func:!1,value:"BDatePickerView.Days"}},{name:"hideDetails",description:"Hide the validation error message.",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"position",description:"Position of picker dropdown when it's showed up",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'bottom left'"}}],sourceFiles:["/home/runner/work/design-system/design-system/src/components/BDatePicker.vue"]};const $e={title:"Components/DatePicker",component:q,tags:["autodocs"],argTypes:{view:{control:"select",options:Object.values(A)}},args:{inputId:"",label:"",validationRules:void 0,placeholder:"",required:!1,requiredErrorMessage:"",disabled:!1,inputCssClass:"",minDate:"",maxDate:"",showHintToday:!1,view:"days",hideDetails:!1,position:"bottom left"}},f={render:y=>({components:{BDatePicker:q},setup(){const r=b(new Date);return{args:y,date:r}},template:`
      <BDatePicker v-bind="args" v-model="date" />
    `}),args:{}};var j,F,N;f.parameters={...f.parameters,docs:{...(j=f.parameters)==null?void 0:j.docs,source:{originalSource:`{
  render: (args: any) => ({
    components: {
      BDatePicker
    },
    setup() {
      const date = ref(new Date());
      return {
        args,
        date
      };
    },
    template: \`
      <BDatePicker v-bind="args" v-model="date" />
    \`
  }),
  args: {}
}`,...(N=(F=f.parameters)==null?void 0:F.docs)==null?void 0:N.source}}};const Ie=["Default"];export{f as Default,Ie as __namedExportsOrder,$e as default};
//# sourceMappingURL=BDatePicker.stories-b715d37e.js.map
