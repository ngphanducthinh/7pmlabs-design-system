{"version":3,"file":"BTextField-80cb7e3c.js","sources":["../../src/components/BTextField.vue"],"sourcesContent":["<script lang=\"ts\" setup>\n// https://github.com/tailwindlabs/tailwindcss/discussions/7554\nimport {\n  useValidationField,\n  type ValidationRule,\n} from '@/composables/Validation';\nimport { v4 as uuid } from 'uuid';\nimport { computed, ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport BErrorMessage from './BErrorMessage.vue';\nimport BLabel from './BLabel.vue';\n\n/**\n * Props\n */\nexport interface BTextFieldProps {\n  inputId?: string;\n  inputCssClass?: string;\n  validationRules?: ValidationRule[];\n  modelValue: string | number;\n  label?: string;\n  /**\n   * FontAwesome v6.1.0 - Solid\n   */\n  prependIcon?: string;\n  hidePrependIcon?: boolean;\n  /**\n   * FontAwesome v6.1.0 - Solid\n   */\n  appendIcon?: string;\n  hideAppendIcon?: boolean;\n  placeholder?: string;\n  autocomplete?: boolean;\n  disabled?: boolean;\n  readonly?: boolean;\n  type?: string;\n  required?: boolean;\n  requiredErrorMessage?: string;\n  hideDetails?: boolean;\n  keyPressFn?: any;\n  inputmode?:\n    | 'none'\n    | 'text'\n    | 'tel'\n    | 'url'\n    | 'email'\n    | 'numeric'\n    | 'decimal'\n    | 'search'; // This allows a browser to display an appropriate virtual keyboard\n}\nconst props = withDefaults(defineProps<BTextFieldProps>(), {\n  inputId: '',\n  inputCssClass: '',\n  validationRules: undefined,\n  label: '',\n  prependIcon: '',\n  hidePrependIcon: false,\n  appendIcon: '',\n  hideAppendIcon: false,\n  placeholder: '',\n  autocomplete: false,\n  disabled: false,\n  readonly: false,\n  type: 'text',\n  required: false,\n  requiredErrorMessage: '',\n  hideDetails: false,\n  keyPressFn: undefined,\n  inputmode: 'text',\n});\n\n/**\n * Events\n */\nconst emit = defineEmits([\n  'click:prepend',\n  'click:append',\n  'press:enter',\n  'focus',\n  'blur',\n  'update:modelValue',\n]);\n\n/**\n * Data\n */\nconst { t } = useI18n();\nconst inputRef = ref<HTMLInputElement | null>(null);\nconst validateRequired: ValidationRule = {\n  validateRule: (val: string) => {\n    if (typeof val === 'number') {\n      return !!val;\n    }\n    return !!(val && val?.trim());\n  },\n  errorMessage: () =>\n    props.requiredErrorMessage || t('ds.global.field_required'),\n};\nconst id = computed(() => props.inputId || `id-${uuid()}`);\nconst value = computed({\n  get() {\n    return props.modelValue;\n  },\n  set(val) {\n    emit('update:modelValue', val);\n  },\n});\nconst inputCssClassValue = computed(() => [\n  {\n    'ds-pl-9': props.prependIcon,\n    'ds-pr-9': props.appendIcon,\n    'ds-cursor-not-allowed ds-bg-[#f2f2f2] ds-text-black/[0.4]': props.disabled,\n    'ds-text-black/[0.85]': !props.disabled,\n    'ds-border-error focus:ds-ring-1 focus:ds-ring-error':\n      !validationResult.value.valid,\n    'ds-border-black/[0.1] focus:ds-border-focus focus:ds-ring-1 focus:ds-ring-focus':\n      validationResult.value.valid,\n  },\n  props.inputCssClass,\n]);\nconst vRules = computed(() => {\n  let result: ValidationRule[] = [];\n\n  if (props.required) {\n    result.push(validateRequired);\n  }\n  if (props.validationRules) {\n    result = result.concat(props.validationRules);\n  }\n\n  return result.length ? result : undefined;\n});\n\nconst { validate, validationResult } = useValidationField(\n  id.value,\n  value,\n  vRules.value,\n);\n\n/**\n * Methods\n */\nconst onClickPrependIcon = () => {\n  emit('click:prepend');\n};\nconst onClickAppendIcon = () => {\n  emit('click:append');\n};\nconst onKeyUpEnter = () => {\n  emit('press:enter');\n};\nconst onFocus = () => {\n  emit('focus');\n};\nconst onBlur = () => {\n  emit('blur');\n};\nconst onKeyUp = () => {\n  validate();\n};\nconst focus = () => {\n  inputRef.value?.focus();\n};\nconst blur = () => {\n  inputRef.value?.blur();\n};\n\ndefineExpose({ validate, focus, blur });\n</script>\n\n<template>\n  <div>\n    <BLabel :id=\"id\" :label=\"label\" :required=\"required\" />\n    <div class=\"ds-relative\">\n      <div\n        v-if=\"prependIcon\"\n        v-show=\"!hidePrependIcon\"\n        class=\"ds-absolute ds-left-3 ds-top-0 ds-z-[1] ds-flex ds-h-full ds-cursor-pointer ds-items-center hover:ds-text-primary-t\"\n      >\n        <span\n          :id=\"`${id}prependIcon`\"\n          :class=\"prependIcon\"\n          @click=\"onClickPrependIcon\"\n        >\n        </span>\n      </div>\n      <input\n        :id=\"id\"\n        ref=\"inputRef\"\n        v-model=\"value\"\n        :autocomplete=\"props.autocomplete ? 'on' : 'off'\"\n        :class=\"inputCssClassValue\"\n        :disabled=\"props.disabled\"\n        :inputmode=\"props.inputmode\"\n        :placeholder=\"props.placeholder\"\n        :readonly=\"props.readonly\"\n        :type=\"props.type\"\n        class=\"ds-block ds-h-[40px] ds-w-full ds-rounded-lg ds-border ds-px-3 ds-text-sm ds-drop-shadow-light\"\n        @blur=\"onBlur\"\n        @focus=\"onFocus\"\n        @keypress=\"keyPressFn\"\n        @keyup=\"onKeyUp\"\n        @keyup.enter=\"onKeyUpEnter\"\n      />\n      <div\n        v-if=\"appendIcon\"\n        v-show=\"!hideAppendIcon\"\n        class=\"ds-absolute ds-right-3 ds-top-0 ds-z-[1] ds-flex ds-h-full ds-cursor-pointer ds-items-center hover:ds-text-primary-t\"\n      >\n        <span\n          :id=\"`${id}appendIcon`\"\n          :class=\"appendIcon\"\n          @click=\"onClickAppendIcon\"\n        >\n        </span>\n      </div>\n    </div>\n\n    <BErrorMessage\n      v-if=\"!hideDetails\"\n      :error-message=\"validationResult.errorMessage()\"\n      class=\"ds-mt-1\"\n    />\n  </div>\n</template>\n"],"names":["t","useI18n","inputRef","ref","validateRequired","val","props","id","computed","uuid","value","emit","inputCssClassValue","validationResult","vRules","result","validate","useValidationField","onClickPrependIcon","onClickAppendIcon","onKeyUpEnter","onFocus","onBlur","onKeyUp","__expose","_a"],"mappings":"89CAsFM,CAAE,EAAAA,GAAMC,IACRC,EAAWC,EAA6B,IAAI,EAC5CC,EAAmC,CACvC,aAAeC,GACT,OAAOA,GAAQ,SACV,CAAC,CAACA,EAEJ,CAAC,EAAEA,IAAOA,GAAA,MAAAA,EAAK,SAExB,aAAc,IACZC,EAAM,sBAAwBN,EAAE,0BAA0B,CAAA,EAExDO,EAAKC,EAAS,IAAMF,EAAM,SAAW,MAAMG,GAAM,EAAE,EACnDC,EAAQF,EAAS,CACrB,KAAM,CACJ,OAAOF,EAAM,UACf,EACA,IAAID,EAAK,CACPM,EAAK,oBAAqBN,CAAG,CAC/B,CAAA,CACD,EACKO,EAAqBJ,EAAS,IAAM,CACxC,CACE,UAAWF,EAAM,YACjB,UAAWA,EAAM,WACjB,4DAA6DA,EAAM,SACnE,uBAAwB,CAACA,EAAM,SAC/B,sDACE,CAACO,EAAiB,MAAM,MAC1B,kFACEA,EAAiB,MAAM,KAC3B,EACAP,EAAM,aAAA,CACP,EACKQ,EAASN,EAAS,IAAM,CAC5B,IAAIO,EAA2B,CAAA,EAE/B,OAAIT,EAAM,UACRS,EAAO,KAAKX,CAAgB,EAE1BE,EAAM,kBACCS,EAAAA,EAAO,OAAOT,EAAM,eAAe,GAGvCS,EAAO,OAASA,EAAS,MAAA,CACjC,EAEK,CAAE,SAAAC,EAAU,iBAAAH,CAAA,EAAqBI,EACrCV,EAAG,MACHG,EACAI,EAAO,KAAA,EAMHI,EAAqB,IAAM,CAC/BP,EAAK,eAAe,CAAA,EAEhBQ,EAAoB,IAAM,CAC9BR,EAAK,cAAc,CAAA,EAEfS,EAAe,IAAM,CACzBT,EAAK,aAAa,CAAA,EAEdU,EAAU,IAAM,CACpBV,EAAK,OAAO,CAAA,EAERW,EAAS,IAAM,CACnBX,EAAK,MAAM,CAAA,EAEPY,EAAU,IAAM,CACXP,GAAA,EASX,OAAAQ,EAAa,CAAE,SAAAR,EAAU,MAPX,IAAM,QAClBS,EAAAvB,EAAS,QAAT,MAAAuB,EAAgB,OAAM,EAMQ,KAJnB,IAAM,QACjBA,EAAAvB,EAAS,QAAT,MAAAuB,EAAgB,MAAK,CAGe,CAAA"}