{"version":3,"file":"BTextarea-4301ad47.js","sources":["../../src/components/BTextarea.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport {\n  useValidationField,\n  type ValidationRule,\n} from '@/composables/Validation';\nimport type { BTextareaProps } from '@/types';\nimport { v4 as uuid } from 'uuid';\nimport { computed } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport BErrorMessage from './BErrorMessage.vue';\nimport BLabel from './BLabel.vue';\n\n/**\n * Props\n */\nconst props = withDefaults(defineProps<BTextareaProps>(), {\n  inputId: '',\n  inputCssClass: '',\n  validationRules: undefined,\n  label: '',\n  placeholder: '',\n  autocomplete: false,\n  disabled: false,\n  readonly: false,\n  rows: 3,\n  required: false,\n  requiredErrorMessage: '',\n  hideDetails: false,\n});\n\n/**\n * Events\n */\nconst emit = defineEmits(['update:modelValue']);\n\n/**\n * Data\n */\nconst { t } = useI18n();\nconst validateRequired: ValidationRule = {\n  validateRule: (val: string | number) => {\n    if (typeof val === 'number') {\n      return !!val;\n    }\n    return !!(val && val?.trim());\n  },\n  errorMessage: () =>\n    props.requiredErrorMessage || t('ds.global.field_required'),\n};\nconst id = computed(() => props.inputId || `id-${uuid()}`);\nconst value = computed({\n  get() {\n    return props.modelValue;\n  },\n  set(val) {\n    emit('update:modelValue', val);\n  },\n});\nconst inputCssClassValue = computed(() => [\n  {\n    'ds-cursor-not-allowed ds-bg-[#f2f2f2] ds-text-black/40': props.disabled,\n    'ds-text-black/[0.85]': !props.disabled,\n    'ds-border-error focus:ds-ring-1 focus:ds-ring-error':\n      !validationResult.value.valid,\n    'ds-border-black/[0.1] focus:ds-border-focus focus:ds-ring-1 focus:ds-ring-focus':\n      validationResult.value.valid,\n  },\n  props.inputCssClass,\n]);\nconst vRules = computed(() => {\n  let result: ValidationRule[] = [];\n\n  if (props.required) {\n    result.push(validateRequired);\n  }\n  if (props.validationRules) {\n    result = result.concat(props.validationRules);\n  }\n\n  return result.length ? result : undefined;\n});\nconst { validate, validationResult } = useValidationField(\n  id.value,\n  value,\n  vRules.value,\n);\n\ndefineExpose({ validate });\n</script>\n\n<template>\n  <div>\n    <BLabel :id=\"id\" :label=\"label\" :required=\"required\" />\n    <textarea\n      :id=\"id\"\n      v-model=\"value\"\n      :autocomplete=\"props.autocomplete ? 'on' : 'off'\"\n      :class=\"inputCssClassValue\"\n      :disabled=\"props.disabled\"\n      :placeholder=\"props.placeholder\"\n      :readonly=\"props.readonly\"\n      :rows=\"props.rows\"\n      class=\"ds-block ds-w-full ds-rounded-lg ds-border ds-px-3 ds-py-1 ds-text-sm ds-drop-shadow-light\"\n    />\n    <BErrorMessage\n      v-if=\"!hideDetails\"\n      :error-message=\"validationResult.errorMessage()\"\n      class=\"ds-mt-1\"\n    />\n  </div>\n</template>\n"],"names":["t","useI18n","validateRequired","val","props","id","computed","uuid","value","emit","inputCssClassValue","validationResult","vRules","result","validate","useValidationField","__expose"],"mappings":"+3BAsCM,CAAE,EAAAA,GAAMC,IACRC,EAAmC,CACvC,aAAeC,GACT,OAAOA,GAAQ,SACV,CAAC,CAACA,EAEJ,CAAC,EAAEA,IAAOA,GAAA,MAAAA,EAAK,SAExB,aAAc,IACZC,EAAM,sBAAwBJ,EAAE,0BAA0B,CAAA,EAExDK,EAAKC,EAAS,IAAMF,EAAM,SAAW,MAAMG,GAAM,EAAE,EACnDC,EAAQF,EAAS,CACrB,KAAM,CACJ,OAAOF,EAAM,UACf,EACA,IAAID,EAAK,CACPM,EAAK,oBAAqBN,CAAG,CAC/B,CAAA,CACD,EACKO,EAAqBJ,EAAS,IAAM,CACxC,CACE,yDAA0DF,EAAM,SAChE,uBAAwB,CAACA,EAAM,SAC/B,sDACE,CAACO,EAAiB,MAAM,MAC1B,kFACEA,EAAiB,MAAM,KAC3B,EACAP,EAAM,aAAA,CACP,EACKQ,EAASN,EAAS,IAAM,CAC5B,IAAIO,EAA2B,CAAA,EAE/B,OAAIT,EAAM,UACRS,EAAO,KAAKX,CAAgB,EAE1BE,EAAM,kBACCS,EAAAA,EAAO,OAAOT,EAAM,eAAe,GAGvCS,EAAO,OAASA,EAAS,MAAA,CACjC,EACK,CAAE,SAAAC,EAAU,iBAAAH,CAAA,EAAqBI,EACrCV,EAAG,MACHG,EACAI,EAAO,KAAA,EAGI,OAAAI,EAAA,CAAE,SAAAF,EAAU"}