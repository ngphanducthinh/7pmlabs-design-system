import{j as se,e as y,k as n,z as T,B as te,g as oe,b as M,s as de,m as u,n as q,t as ne,u as $,l as z,x as re,o as f,C as I}from"./vue.esm-bundler-109c6e5d.js";import{I as i}from"./imask-7.1.3-80c1e5b4.js";import{A as le,c as ie,m as c}from"./DateHelper-87bc46a3.js";import{u as ce}from"./vue-i18n-cb82ae8c.js";import{u as ue}from"./Validation-fee331a1.js";import{D as Y}from"./Common-c3b475f1.js";import{c as O}from"./Enums-5b02df9b.js";import{u as j,l as me}from"./ComponentHelper-d29c08d8.js";import{_ as pe}from"./BErrorMessage-d03d9705.js";import{_ as fe}from"./BLabel-601fac8d.js";import{v as be}from"./v4-4a60fe23.js";import"./_commonjsHelpers-725317a4.js";import"./_commonjs-dynamic-modules-302442b1.js";const ye={class:"ds-relative"},ke=["id","disabled","placeholder"],he=["id","disabled"],ve=["for"],_e=["for"],ge=u("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192zM96 296c0-13.3 10.7-24 24-24H328c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24zm24 72H232c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24s10.7-24 24-24z"},null,-1),De=[ge],B=se({__name:"BDatePicker",props:{inputId:{default:""},modelValue:{},label:{default:""},validationRules:{default:void 0},placeholder:{default:""},required:{type:Boolean,default:!1},requiredErrorMessage:{default:""},disabled:{type:Boolean,default:!1},inputCssClass:{default:""},minDate:{default:""},maxDate:{default:""},showHintToday:{type:Boolean,default:!1},view:{default:O.Days},hideDetails:{type:Boolean,default:!1},position:{default:"bottom left"}},emits:["update:modelValue"],setup(k,{emit:h}){const s=k,l=h,{t:e,locale:E}=ce(),m=`DD${Y}MM${Y}YYYY`,v=new Date;let o,r;const P=y(null),L={validateRule:a=>!!a,errorMessage:()=>s.requiredErrorMessage||e("ds.global.field_required")},_=y(),d=n(()=>s.inputId||`id-${be()}`),H=n({get(){return s.modelValue},set(a){l("update:modelValue",a)}}),U=n(()=>[{content:e("ds.components.base.date_picker.buttons.cancel"),className:"ds-bg-transparent focus:ds-ring-1 focus:ds-ring-gray-300 ds-border-inner-primary-f !ds-text-primary-t hover:ds-bg-[#e6f0fe] ds-text-sm ds-leading-4 ds-px-4 ds-mx-1",onClick:a=>{a.clear(),I(()=>{D()}),a.hide()}},{content:e("ds.components.base.date_picker.buttons.confirm"),className:`${d.value}-btn-confirm focus:ds-ring-1 focus:ds-ring-1 focus:ds-ring-blue-300 ds-bg-gradient-to-r ds-from-primary-f-stop ds-from-primary-f ds-to-primary-t !ds-text-white enabled:hover:ds-bg-[#0e4bbd] ds-text-sm ds-leading-4 ds-px-4 disabled:ds-from-[#e2e4e8] disabled:ds-to-[#e2e4e8] disabled:ds-text-black/[0.4] ds-mx-1`,onClick:a=>{H.value=_.value!==void 0?_.value:"",I(()=>{D()}),a.hide()},attrs:s.required?{disabled:""}:void 0}]),C=n(()=>{const a={days:[e("ds.components.base.date_picker.days.sunday"),e("ds.components.base.date_picker.days.monday"),e("ds.components.base.date_picker.days.tuesday"),e("ds.components.base.date_picker.days.wednesday"),e("ds.components.base.date_picker.days.thursday"),e("ds.components.base.date_picker.days.friday"),e("ds.components.base.date_picker.days.saturday")],daysShort:[e("ds.components.base.date_picker.days_short.sunday"),e("ds.components.base.date_picker.days_short.monday"),e("ds.components.base.date_picker.days_short.tuesday"),e("ds.components.base.date_picker.days_short.wednesday"),e("ds.components.base.date_picker.days_short.thursday"),e("ds.components.base.date_picker.days_short.friday"),e("ds.components.base.date_picker.days_short.saturday")],daysMin:[e("ds.components.base.date_picker.days_min.sunday"),e("ds.components.base.date_picker.days_min.monday"),e("ds.components.base.date_picker.days_min.tuesday"),e("ds.components.base.date_picker.days_min.wednesday"),e("ds.components.base.date_picker.days_min.thursday"),e("ds.components.base.date_picker.days_min.friday"),e("ds.components.base.date_picker.days_min.saturday")],months:[e("ds.components.base.date_picker.months.january"),e("ds.components.base.date_picker.months.february"),e("ds.components.base.date_picker.months.march"),e("ds.components.base.date_picker.months.april"),e("ds.components.base.date_picker.months.may"),e("ds.components.base.date_picker.months.june"),e("ds.components.base.date_picker.months.july"),e("ds.components.base.date_picker.months.august"),e("ds.components.base.date_picker.months.september"),e("ds.components.base.date_picker.months.october"),e("ds.components.base.date_picker.months.november"),e("ds.components.base.date_picker.months.december")],monthsShort:[e("ds.components.base.date_picker.months_short.january"),e("ds.components.base.date_picker.months_short.february"),e("ds.components.base.date_picker.months_short.march"),e("ds.components.base.date_picker.months_short.april"),e("ds.components.base.date_picker.months_short.may"),e("ds.components.base.date_picker.months_short.june"),e("ds.components.base.date_picker.months_short.july"),e("ds.components.base.date_picker.months_short.august"),e("ds.components.base.date_picker.months_short.september"),e("ds.components.base.date_picker.months_short.october"),e("ds.components.base.date_picker.months_short.november"),e("ds.components.base.date_picker.months_short.december")],today:e("ds.components.base.date_picker.buttons.today"),clear:e("ds.components.base.date_picker.buttons.clear"),dateFormat:"dd/MM/yyyy",timeFormat:"HH:mm",firstDay:1},t=({date:p})=>{_.value=p,s.required&&ae(!!p)};return{locale:a,selectedDates:[s.modelValue],onSelect:t,buttons:[...U.value],showOtherMonths:!1,timepicker:!1,onlyTimepicker:!1,minDate:s.minDate,maxDate:s.maxDate,view:s.view,onHide:Q,onShow:W,navTitles:{days:"MMMM yyyy"},position:s.position,prevHtml:`<svg xmlns="http://www.w3.org/2000/svg"
                   viewBox="0 0 320 512">
                  <path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/>
              </svg>`,nextHtml:`<svg xmlns="http://www.w3.org/2000/svg"
                   viewBox="0 0 320 512">
                  <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>
              </svg>`}}),G=n(()=>{let a=[];return s.required&&a.push(L),s.validationRules&&(a=a.concat(s.validationRules)),a.length?a:void 0}),S=n(()=>["ds-border ds-rounded-lg ds-block ds-w-full ds-text-sm ds-px-3 ds-h-[40px]",{"ds-cursor-not-allowed ds-bg-[#f2f2f2] ds-text-black/[0.4]":s.disabled,"ds-text-black/[0.85]":!s.disabled,"ds-border-error focus:ds-ring-1 focus:ds-ring-error":!V.value.valid,"ds-border-black/[0.1] focus:ds-border-focus focus:ds-ring-1 focus:ds-ring-focus":V.value.valid,"!ds-border-focus ds-ring-1 ds-ring-focus":g.value},s.inputCssClass]),J=n(()=>s.modelValue?v.getDate()===s.modelValue.getDate()&&v.getMonth()===s.modelValue.getMonth()&&v.getFullYear()===s.modelValue.getFullYear():!1),K=n(()=>{const a={mask:i.MaskedDate,pattern:m,lazy:!0,format:t=>c(t).format(m),parse:t=>c(t,m),blocks:{YYYY:{mask:i.MaskedRange,from:1,to:9999},MM:{mask:i.MaskedRange,from:1,to:12},DD:{mask:i.MaskedRange,from:1,to:31}}};return s.minDate&&(a.min=s.minDate),s.maxDate&&(a.max=s.maxDate),a}),g=y(!1),{validate:D,validationResult:V}=ue(d.value,H,G.value);T(()=>s.modelValue,()=>{w(o.selectedDates[0])&&(s.modelValue?(o.selectDate(s.modelValue),o.setViewDate(s.modelValue)):o.clear()),w(x())&&(r.value=R(s.modelValue))},{deep:!0}),T([E,()=>s.position,()=>s.minDate,()=>s.maxDate,()=>s.view],()=>{o.update(C.value)});const R=a=>ie(a)?c(a).format(m):a,Q=()=>{g.value=!1,j()},W=()=>{g.value=!0,s.modelValue?(o.selectDate(s.modelValue),o.setViewDate(s.modelValue)):o.clear(),me()},X=()=>{r.unmaskedValue||l("update:modelValue","")},Z=()=>{const a=x();return a?l("update:modelValue",a):l("update:modelValue","")},ee=()=>{const a=x();D(),w(a)&&l("update:modelValue",a===void 0?"":a)},w=a=>[!s.modelValue&&a,!a&&s.modelValue,s.modelValue&&a&&s.modelValue.getTime()!==a.getTime()].some(p=>p),x=()=>{const a=r.value.split("/"),t=`${a[2]}-${a[1]}-${a[0]}`;if(c(t,c.ISO_8601,!0).isValid())return new Date(t)},ae=a=>{const t=document.querySelector(`.${d.value}-btn-confirm`);a?t==null||t.removeAttribute("disabled"):t==null||t.setAttribute("disabled","")};return te(()=>{o=new le(`#${d.value}Picker`,C.value),r=i(P.value,K.value),r.value=R(s.modelValue),r.on("accept",X),r.on("complete",Z)}),oe(()=>{j()}),(a,t)=>(f(),M("div",null,[de(fe,{id:d.value,label:a.label,required:a.required},null,8,["id","label","required"]),u("div",ye,[u("input",{id:d.value,ref_key:"inputMaskRef",ref:P,class:q([S.value,"ds-relative ds-z-[2] ds-drop-shadow-light"]),disabled:a.disabled,placeholder:a.placeholder,onBlur:ee},null,42,ke),u("input",{id:`${d.value}Picker`,class:q([S.value,"ds-absolute ds-top-0 ds-z-[1]"]),disabled:a.disabled,readonly:""},null,10,he),a.showHintToday&&J.value?(f(),M("label",{key:0,for:d.value,class:"ds-absolute ds-left-[98px] ds-top-2.5 ds-z-[3] ds-text-sm"},ne(`(${$(e)("ds.components.base.date_picker.today")})`),9,ve)):z("",!0),u("label",{for:`${d.value}Picker`,class:"ds-absolute ds-right-3 ds-top-3 ds-z-[3]"},[(f(),M("svg",{class:q([[s.disabled?"ds-fill-black/40":"ds-text-black/[0.85]"],"ds-h-4 ds-w-4"]),viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},De,2))],8,_e)]),a.hideDetails?z("",!0):(f(),re(pe,{key:0,"error-message":$(V).errorMessage(),class:"ds-mt-1"},null,8,["error-message"]))]))}});B.__docgenInfo={exportName:"default",displayName:"BDatePicker",description:"",tags:{},props:[{name:"inputId",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"modelValue",required:!0,type:{name:"any"}},{name:"label",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"validationRules",description:"Array of custom validation rules.",required:!1,type:{name:"Array",elements:[{name:"ValidationRule"}]},defaultValue:{func:!1,value:"undefined"}},{name:"placeholder",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"required",description:"Validate if the field is left empty.",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"requiredErrorMessage",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"inputCssClass",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"minDate",description:"Minimum selectable date",required:!1,type:{name:"any"},defaultValue:{func:!1,value:"''"}},{name:"maxDate",description:"Maximum selectable date",required:!1,type:{name:"any"},defaultValue:{func:!1,value:"''"}},{name:"showHintToday",description:'Show "Today" text if selected date is the current date',required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"view",description:"Default view mode when open picker dropdown",required:!1,type:{name:"BDatePickerView"},defaultValue:{func:!1,value:"BDatePickerView.Days"}},{name:"hideDetails",description:"Hide the validation error message.",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"position",description:"Position of picker dropdown when it's showed up",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'bottom left'"}}],events:[{name:"update:modelValue",type:{names:["any"]},description:"Update value, param <code>value: any</code>",properties:[{type:{names:["mixed"]},description:"e"},{type:{names:["mixed"]},name:"value"}],tags:[{title:"param",type:{name:"mixed"},description:"e"},{title:"param",type:{name:"mixed"},name:"value"}]}],sourceFiles:["/home/runner/work/design-system/design-system/src/components/BDatePicker.vue"]};const ze={title:"Components/DatePicker",parameters:{docs:{description:{component:"The <code>BDatePicker</code> component is a fully featured date selection component that lets users select a date."}}},component:B,tags:["autodocs"],argTypes:{view:{control:"select",options:Object.values(O)}},args:{inputId:"",label:"",validationRules:void 0,placeholder:"",required:!1,requiredErrorMessage:"",disabled:!1,inputCssClass:"",minDate:"",maxDate:"",showHintToday:!1,view:"days",hideDetails:!1,position:"bottom left"}},b={render:k=>({components:{BDatePicker:B},setup(){const h=y(new Date);return{args:k,date:h}},template:`
      <BDatePicker v-bind="args" v-model="date" />
    `}),args:{}};var F,N,A;b.parameters={...b.parameters,docs:{...(F=b.parameters)==null?void 0:F.docs,source:{originalSource:`{
  render: (args: any) => ({
    components: {
      BDatePicker
    },
    setup() {
      const date = ref(new Date());
      return {
        args,
        date
      };
    },
    template: \`
      <BDatePicker v-bind="args" v-model="date" />
    \`
  }),
  args: {}
}`,...(A=(N=b.parameters)==null?void 0:N.docs)==null?void 0:A.source}}};const Ie=["Default"];export{b as Default,Ie as __namedExportsOrder,ze as default};
