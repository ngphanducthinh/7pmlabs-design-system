{"version":3,"file":"BCarousel.stories-381d90df.js","sources":["../../src/components/BCarousel/BCarousel.vue","../../src/components/BCarousel/BCarouselItem.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport { computed, onBeforeUnmount, onMounted, ref, watch } from 'vue';\n\n/**\n * Props\n */\ninterface BCarouselProps {\n  /**\n   * Index of slide.\n   */\n  modelValue?: number;\n  /**\n   * Automatically go to the next slide every 5s (default).\n   */\n  autoplay?: boolean;\n  /**\n   * Waiting time before going to the next slide.\n   */\n  duration?: number;\n  /**\n   * Show navigation controls.\n   */\n  navigation?: boolean;\n  /**\n   * Show bottom controls.\n   */\n  pagination?: boolean;\n  /**\n   * Return to the first slide after reaching the end.\n   */\n  continuous?: boolean;\n}\nconst props = withDefaults(defineProps<BCarouselProps>(), {\n  modelValue: undefined,\n  autoplay: false,\n  duration: 5000,\n  navigation: false,\n  pagination: false,\n  continuous: true,\n});\n\n/**\n * Events\n */\nconst emit = defineEmits<{\n  'update:modelValue': [value: number];\n}>();\n\n/**\n * Data\n */\nlet autoplayIntervalFn: any;\nconst mValue = ref(0);\nconst itemCount = ref(0);\nconst container = ref<HTMLElement | null>(null);\nconst carouselItems = ref<Element[] | null>(null);\nconst value = computed({\n  get() {\n    return props.modelValue !== undefined ? props.modelValue : mValue.value;\n  },\n  set(val) {\n    if (props.modelValue !== undefined) {\n      emit('update:modelValue', val);\n    } else {\n      mValue.value = val;\n    }\n  },\n});\nconst showNextNav = computed(\n  () => props.continuous || value.value < itemCount.value - 1,\n);\nconst showPrevNav = computed(() => props.continuous || value.value > 0);\n\n/**\n * Watch\n */\nwatch(value, (val, oldVal) => {\n  selectCarouselItem(val, oldVal);\n});\nwatch(\n  () => props.autoplay,\n  (val) => {\n    if (val) {\n      if (props.duration > 0) {\n        clearAutoPlay();\n        setAutoPlay();\n      } else {\n        clearAutoPlay();\n      }\n    } else {\n      clearAutoPlay();\n    }\n  },\n);\nwatch(\n  () => props.duration,\n  (val) => {\n    if (props.autoplay) {\n      if (val > 0) {\n        clearAutoPlay();\n        setAutoPlay();\n      } else {\n        clearAutoPlay();\n      }\n    }\n  },\n);\n\n/**\n * Methods\n */\nconst goToItem = (index: number) => {\n  value.value = index;\n};\nconst nextItem = () => {\n  if (value.value === itemCount.value - 1) {\n    if (props.continuous) {\n      value.value = 0;\n    }\n  } else {\n    value.value = value.value + 1;\n  }\n};\nconst prevItem = () => {\n  if (value.value === 0) {\n    if (props.continuous) {\n      value.value = itemCount.value - 1;\n    }\n  } else {\n    value.value = value.value - 1;\n  }\n};\nconst setAutoPlay = () => {\n  autoplayIntervalFn = setInterval(() => {\n    nextItem();\n  }, props.duration);\n};\nconst clearAutoPlay = () => {\n  if (autoplayIntervalFn) {\n    clearInterval(autoplayIntervalFn);\n  }\n};\nconst selectCarouselItem = (index: number, oldIndex: number) => {\n  if (carouselItems.value) {\n    // Set activeIndex\n    value.value = index;\n\n    // Ensure reverse css classes\n    const isReverse = index < oldIndex;\n    const slideOutCssClass = isReverse ? 'slide-out-reverse' : 'slide-out';\n    const slideInCssClass = isReverse ? 'slide-in-reverse' : 'slide-in';\n    if (isReverse) {\n      carouselItems.value[oldIndex].classList.add('reverse');\n      carouselItems.value[value.value].classList.add('reverse');\n    } else {\n      carouselItems.value[oldIndex].classList.remove('reverse');\n      carouselItems.value[value.value].classList.remove('reverse');\n    }\n\n    // Remove active class from previous item\n    if (oldIndex !== index) {\n      carouselItems.value[oldIndex].classList.remove(\n        'slide-in',\n        'slide-in-reverse',\n      );\n      carouselItems.value[oldIndex].classList.add(slideOutCssClass);\n      // After 0.5s transition animation, hide the previous item\n      setTimeout(() => {\n        carouselItems.value![oldIndex].classList.remove('active');\n      }, 500);\n    }\n\n    // Add active class into active item\n    carouselItems.value[value.value].classList.remove(\n      'slide-out',\n      'slide-out-reverse',\n    );\n    carouselItems.value[value.value].classList.add(slideInCssClass);\n    carouselItems.value[value.value].classList.add('active');\n  }\n};\nconst init = () => {\n  if (props.autoplay) {\n    setAutoPlay();\n  }\n};\n\ninit();\n\n/**\n * Lifecycle Hooks\n */\nonMounted(() => {\n  if (container.value) {\n    const oldValue = value.value;\n    const items = container.value.querySelectorAll('.carousel-item') as any;\n    if (items.length) {\n      itemCount.value = items.length;\n      carouselItems.value = [...items];\n\n      carouselItems.value.forEach((carouselItem) => {\n        if (carouselItem.classList.contains('active')) {\n          value.value = carouselItems.value!.indexOf(carouselItem);\n        }\n      });\n      selectCarouselItem(value.value, oldValue);\n    }\n  }\n});\nonBeforeUnmount(() => {\n  clearInterval(autoplayIntervalFn);\n});\n</script>\n\n<template>\n  <div\n    ref=\"container\"\n    class=\"ds-relative ds-min-h-[6rem] ds-w-full ds-overflow-x-hidden ds-rounded-lg\"\n  >\n    <div class=\"carousel-content\">\n      <slot> </slot>\n    </div>\n\n    <template v-if=\"props.navigation\">\n      <div\n        v-if=\"showPrevNav\"\n        class=\"carousel-navigation--left\"\n        @click=\"prevItem\"\n      >\n        <div\n          class=\"ds-cursor-pointer ds-rounded-full ds-bg-primary-f/40 ds-p-2 hover:ds-bg-primary-f/70\"\n        >\n          <svg\n            class=\"ds-h-5 ds-w-5 ds-fill-white\"\n            viewBox=\"0 0 320 512\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z\"\n            />\n          </svg>\n        </div>\n      </div>\n      <div\n        v-if=\"showNextNav\"\n        class=\"carousel-navigation--right\"\n        @click=\"nextItem\"\n      >\n        <div\n          class=\"ds-cursor-pointer ds-rounded-full ds-bg-primary-f/40 ds-p-2 hover:ds-bg-primary-f/70\"\n        >\n          <svg\n            class=\"ds-h-5 ds-w-5 ds-fill-white\"\n            viewBox=\"0 0 320 512\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z\"\n            />\n          </svg>\n        </div>\n      </div>\n    </template>\n\n    <div v-if=\"props.pagination\" class=\"carousel-pagination\">\n      <span\n        v-for=\"(item, index) in itemCount\"\n        :key=\"index\"\n        :class=\"{\n          'ds-bg-gradient-to-r ds-from-primary-f ds-from-primary-f-stop ds-to-primary-t':\n            index === value,\n        }\"\n        @click=\"goToItem(index)\"\n      >\n      </span>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.carousel-content {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  max-height: 100%;\n  height: 100%;\n}\n.carousel-navigation--left,\n.carousel-navigation--right {\n  padding: 0 1rem;\n  height: 100%;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.carousel-navigation--right {\n  right: 0;\n}\n\n.carousel-pagination {\n  position: absolute;\n  bottom: 0.5rem;\n  width: 100%;\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  align-items: center;\n\n  span {\n    cursor: pointer;\n    width: 1.25rem;\n    height: 1.25rem;\n    border-radius: 50%;\n    background-color: #fff;\n    box-shadow:\n      0 1px 3px 0 rgba(0, 0, 0, 0.1),\n      0 1px 2px 0 rgba(0, 0, 0, 0.06);\n    opacity: 0.8;\n  }\n}\n</style>\n","<script setup lang=\"ts\"></script>\n\n<template>\n  <div class=\"carousel-item\">\n    <slot />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.carousel-item {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: none;\n  transform: translateX(100%);\n\n  &.reverse {\n    transform: translateX(-100%);\n  }\n\n  &.active {\n    display: block;\n  }\n}\n\n// Define transition animation 'slide'\n.slide-in {\n  animation: slide-in 0.5s forwards;\n}\n.slide-out {\n  animation: slide-out 0.5s forwards;\n}\n@keyframes slide-in {\n  100% {\n    transform: translateX(0%);\n  }\n}\n@keyframes slide-out {\n  0% {\n    transform: translateX(0%);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n}\n\n.slide-in-reverse {\n  animation: slide-in-reverse 0.5s forwards;\n}\n.slide-out-reverse {\n  animation: slide-out-reverse 0.5s forwards;\n}\n@keyframes slide-in-reverse {\n  100% {\n    transform: translateX(0%);\n  }\n}\n@keyframes slide-out-reverse {\n  0% {\n    transform: translateX(0%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n</style>\n<style lang=\"scss\">\n.carousel-item {\n  img {\n    min-width: 100%;\n    height: 100%;\n    // object-fit: cover;\n  }\n}\n</style>\n"],"names":["autoplayIntervalFn","mValue","ref","itemCount","container","carouselItems","value","computed","props","val","emit","showNextNav","showPrevNav","watch","oldVal","selectCarouselItem","clearAutoPlay","setAutoPlay","goToItem","index","nextItem","prevItem","oldIndex","isReverse","slideOutCssClass","slideInCssClass","onMounted","oldValue","items","carouselItem","onBeforeUnmount","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_1"],"mappings":"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"}