import{o as m,c as _,h as r,e as E,f as I,w as T,s as oe,d as de,m as C,k as f,q as b,G as ue,g as D,Q as me,T as ce,a as y,u as V,F as pe,x as ge,A as q,j as ve,t as fe}from"./vue.esm-bundler-ceeda665.js";import{F as L}from"./Common-74b424b5.js";import{u as ye}from"./vue-i18n-5bf62172.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{l as he,u as _e}from"./ComponentHelper-8c2ae0a5.js";import{B as ke}from"./BOverlay-6e4173f0.js";import{u as Ie}from"./Validation-e4311cdc.js";import{_ as we}from"./BLabel-93eef36b.js";import{_ as be}from"./BButton-e2b689c0.js";import{_ as xe}from"./BErrorMessage-4dbabbe9.js";import{i as Be}from"./isEmpty-125c046a.js";import{v as Ve}from"./v4-eb618527.js";import"./Enums-b5cac340.js";import"./_getTag-a6d04ccb.js";const N={},Ce={class:"ds-absolute ds-rounded-full ds-bg-black/20"};function De(c,i){return m(),_("div",Ce,i[0]||(i[0]=[r("div",{class:"ds-flex ds-h-full ds-w-full ds-items-center ds-justify-center"},[r("svg",{class:"ds-h-5 ds-w-5 ds-cursor-pointer ds-fill-white hover:ds-fill-white/60",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM175 208.1L222.1 255.1L175 303C165.7 312.4 165.7 327.6 175 336.1C184.4 346.3 199.6 346.3 208.1 336.1L255.1 289.9L303 336.1C312.4 346.3 327.6 346.3 336.1 336.1C346.3 327.6 346.3 312.4 336.1 303L289.9 255.1L336.1 208.1C346.3 199.6 346.3 184.4 336.1 175C327.6 165.7 312.4 165.7 303 175L255.1 222.1L208.1 175C199.6 165.7 184.4 165.7 175 175C165.7 184.4 165.7 199.6 175 208.1V208.1z"})])],-1)]))}const F=$(N,[["render",De]]);N.__docgenInfo={displayName:"BImagePickerCloseButton",description:"",tags:{},sourceFiles:["/home/runner/work/design-system/design-system/src/components/BImagePicker/BImagePickerCloseButton.vue"]};const A=E({__name:"BImagePreview",props:{modelValue:{type:Boolean},url:{}},emits:["update:modelValue"],setup(c,{emit:i}){const p=c,s=i,o=I({get(){return p.modelValue},set(d){s("update:modelValue",d)}});T(o,d=>{d?he():_e()});const g=()=>{o.value=!1},v=d=>{d.key==="Escape"&&g()};return oe(()=>{document.addEventListener("keydown",v)}),de(()=>{document.removeEventListener("keydown",v)}),(d,t)=>(m(),C(ce,{to:"body"},[f(me,{name:"fade"},{default:b(()=>[o.value?(m(),C(ke,{key:0},{default:b(()=>[f(F,{class:"ds-right-4 ds-top-4 ds-h-8 ds-w-8",onClick:g}),r("div",{style:ue({backgroundImage:`url('${p.url}')`,height:"calc(100vh - 16px)",width:"calc(100vw - 16px)"}),class:"ds-bg-contain ds-bg-center ds-bg-no-repeat"},null,4)]),_:1})):D("",!0)]),_:1})]))}});A.__docgenInfo={exportName:"default",displayName:"BImagePreview",description:"",tags:{},props:[{name:"modelValue",required:!0,type:{name:"boolean"}},{name:"url",required:!0,type:{name:"string"}}],events:[{name:"update:modelValue",type:{names:["boolean"]},description:"Update value, param: <code>value: boolean</code>",properties:[{type:{names:["mixed"]},description:"e"},{type:{names:["mixed"]},name:"value"}],tags:[{title:"param",type:{name:"mixed"},description:"e"},{title:"param",type:{name:"mixed"},name:"value"}]}],sourceFiles:["/home/runner/work/design-system/design-system/src/components/BImagePicker/BImagePreview.vue"]};const Fe={class:"b-image-picker ds-w-full"},Re={class:"ds-gap-2 ds-space-y-4 ds-rounded-lg ds-bg-white ds-p-4 ds-drop-shadow"},Pe={key:0,class:"ds-flex ds-flex-wrap ds-justify-center ds-gap-1"},qe=["onClick","onDragenter","onDragstart","onDrop"],Le=["src"],Me=["src"],ze={class:"ds-flex ds-flex-wrap ds-justify-center"},Se=["accept","multiple"],j=E({__name:"BImagePicker",props:{inputId:{default:""},modelValue:{},label:{default:""},multiple:{type:Boolean,default:!1},maxFileSize:{default:20},hideDetails:{type:Boolean,default:!1},required:{type:Boolean,default:!1},requiredErrorMessage:{default:""},validationRules:{default:void 0}},emits:["change","update:modelValue"],setup(c,{expose:i,emit:p}){const s=c,o=p,{t:g}=ye(),v=y(null),d=y(0),t=I({get(){return s.modelValue},set(e){o("update:modelValue",e)}}),x=y(!0),B=y(!0),k=y({visible:!1,url:""}),R=I(()=>L.join(", ")),O=I(()=>s.inputId||`id-${Ve()}`),G={validateRule:e=>!!e&&e.length>0,errorMessage:()=>s.requiredErrorMessage||g("ds.global.field_required")},H={validateRule:()=>x.value,errorMessage:()=>g("ds.components.base.image_picker.file_types_valid",{types:R.value})},Q={validateRule:()=>B.value,errorMessage:()=>g("ds.components.base.image_picker.file_size_valid",{size:s.maxFileSize})},J=I(()=>{let e=[];return s.required&&e.push(G),s.validationRules&&(e=e.concat(s.validationRules)),e.push(H),e.push(Q),e.length?e:void 0}),{validate:h,validationResult:K}=Ie(O.value,t,J.value),W=(e,a)=>{d.value=e,a.target.classList.add("dragging"),a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("index",e.toString())},X=e=>{e.target.classList.remove("dragging")},Y=(e,a)=>{const l=a.target;d.value!==e&&l.classList.add("dropped-target")},Z=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},ee=e=>{e.target.classList.remove("dropped-target")},ae=(e,a)=>{a.preventDefault(),a.target.classList.remove("dropped-target");const n=parseInt(a.dataTransfer.getData("index")),u=t.value[n];t.value.splice(n,1),t.value.splice(e,0,u),o("change"),h()},se=()=>{var e;(e=v.value)==null||e.click()},te=e=>{let a=e.target.files||e.dataTransfer.files;a.length&&(le(a),v.value&&(v.value.value=null))},le=e=>{Array.from(e).forEach(a=>{if(x.value=L.includes(a.type),B.value=ie(a.size)<=s.maxFileSize,x.value&&B.value){let l=new FileReader;l.onload=n=>{s.multiple?t.value.push({url:n.target.result,file:a,type:a.type}):t.value={url:n.target.result,file:a,type:a.type},o("change"),h()},l.readAsDataURL(a)}else h()})},re=e=>{t.value.splice(e,1),o("change"),h()},ne=()=>{t.value={},o("change"),h()},ie=e=>e/1024**2,P=e=>{k.value.url=e.url||"",k.value.visible=!0};return i({validate:h}),(e,a)=>(m(),_("div",Fe,[f(we,{label:s.label},null,8,["label"]),r("div",Re,[V(Be)(t.value)?D("",!0):(m(),_("div",Pe,[s.multiple?(m(!0),_(pe,{key:0},ge(t.value,(l,n)=>(m(),_("div",{key:l.url,class:"b-image-picker__draggable ds-h-full ds-cursor-pointer ds-rounded-lg ds-transition-all hover:ds-ring-2 hover:ds-ring-primary-t",draggable:"true",onClick:u=>P(l),onDragend:X,onDragenter:u=>Y(n,u),onDragleave:ee,onDragover:Z,onDragstart:u=>W(n,u),onDrop:u=>ae(n,u)},[r("img",{src:l.url,alt:"image",class:"ds-h-full ds-w-full ds-rounded-lg"},null,8,Le),f(F,{class:"ds-right-1 ds-top-1 ds-h-8 ds-w-8",onClick:q(u=>re(n),["stop"])},null,8,["onClick"])],40,qe))),128)):(m(),_("div",{key:1,class:"b-image-picker__draggable ds-h-full ds-cursor-pointer ds-rounded-lg ds-transition-all hover:ds-ring-2 hover:ds-ring-primary-t",draggable:"true",onClick:a[0]||(a[0]=l=>P(t.value))},[r("img",{src:t.value.url,alt:"image",class:"ds-h-full ds-w-full ds-rounded-lg"},null,8,Me),f(F,{class:"ds-right-1 ds-top-1 ds-h-8 ds-w-8",onClick:q(ne,["stop"])})]))])),r("div",ze,[f(be,{onClick:se},{default:b(()=>[ve(fe(V(g)("ds.components.base.image_picker.select_image")),1)]),appendIcon:b(()=>a[2]||(a[2]=[r("svg",{class:"ds-h-4 ds-w-4 ds-fill-primary-t",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M447.1 32h-384C28.64 32-.0091 60.65-.0091 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96C511.1 60.65 483.3 32 447.1 32zM111.1 96c26.51 0 48 21.49 48 48S138.5 192 111.1 192s-48-21.49-48-48S85.48 96 111.1 96zM446.1 407.6C443.3 412.8 437.9 416 432 416H82.01c-6.021 0-11.53-3.379-14.26-8.75c-2.73-5.367-2.215-11.81 1.334-16.68l70-96C142.1 290.4 146.9 288 152 288s9.916 2.441 12.93 6.574l32.46 44.51l93.3-139.1C293.7 194.7 298.7 192 304 192s10.35 2.672 13.31 7.125l128 192C448.6 396 448.9 402.3 446.1 407.6z"})],-1)])),_:1}),r("input",{ref_key:"inputRef",ref:v,accept:R.value,multiple:s.multiple,class:"ds-hidden",type:"file",onChange:te},null,40,Se)])]),s.hideDetails?D("",!0):(m(),C(xe,{key:0,"error-message":V(K).errorMessage(),class:"ds-mt-1"},null,8,["error-message"])),f(A,{modelValue:k.value.visible,"onUpdate:modelValue":a[1]||(a[1]=l=>k.value.visible=l),url:k.value.url},null,8,["modelValue","url"])]))}});const U=$(j,[["__scopeId","data-v-8033e228"]]);j.__docgenInfo={exportName:"default",displayName:"BImagePicker",description:"",tags:{},expose:[{name:"validate"}],props:[{name:"inputId",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"modelValue",description:"Empty object <code>multiple: false</code> or empty array <code>multiple: true</code>.",required:!0,type:{name:"union",elements:[{name:"FileItemRead"},{name:"Array",elements:[{name:"FileItemRead"}]}]}},{name:"label",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"multiple",description:"Allow to pick multiple images, v-model expects an array.",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"maxFileSize",description:"Maximum file size in MB.",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"20"}},{name:"hideDetails",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"required",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"requiredErrorMessage",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"validationRules",required:!1,type:{name:"Array",elements:[{name:"ValidationRule"}]},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"change",description:"Value has been changed",properties:[{type:{names:["mixed"]},description:"e"}],tags:[{title:"param",type:{name:"mixed"},description:"e"}]},{name:"update:modelValue",type:{names:["union"],elements:[{name:"FileItemRead"},{name:"Array",elements:[{name:"FileItemRead"}]}]},description:"Update value, param: <code>value: FileItemRead | FileItemRead[]</code>",properties:[{type:{names:["mixed"]},description:"e"},{type:{names:["mixed"]},name:"value"}],tags:[{title:"param",type:{name:"mixed"},description:"e"},{title:"param",type:{name:"mixed"},name:"value"}]}],sourceFiles:["/home/runner/work/design-system/design-system/src/components/BImagePicker/BImagePicker.vue"]};const Xe={title:"Components/ImagePicker",parameters:{docs:{description:{component:"The <code>BImagePicker</code> component allow to pick single or multiple images from your machine."}}},component:U,tags:["autodocs"],argTypes:{},args:{inputId:"",label:"",multiple:!1,maxFileSize:20,hideDetails:!1,required:!1,requiredErrorMessage:"",validationRules:void 0}},w={render:c=>({components:{BImagePicker:U},setup(){const i=y({}),p=y([]);return T(()=>c.multiple,()=>{i.value={},p.value=[]}),{args:c,image:i,images:p}},template:`
      <BImagePicker v-if="args.multiple" v-bind="args" v-model="images" />
      <BImagePicker v-else v-bind="args" v-model="image" />
    `}),args:{}};var M,z,S;w.parameters={...w.parameters,docs:{...(M=w.parameters)==null?void 0:M.docs,source:{originalSource:`{
  render: (args: any) => ({
    components: {
      BImagePicker
    },
    setup() {
      const image = ref<FileItemRead>({});
      const images = ref<FileItemRead[]>([]);
      watch(() => args.multiple, () => {
        image.value = {};
        images.value = [];
      });
      return {
        args,
        image,
        images
      };
    },
    template: \`
      <BImagePicker v-if="args.multiple" v-bind="args" v-model="images" />
      <BImagePicker v-else v-bind="args" v-model="image" />
    \`
  }),
  args: {}
}`,...(S=(z=w.parameters)==null?void 0:z.docs)==null?void 0:S.source}}};const Ye=["Default"];export{w as Default,Ye as __namedExportsOrder,Xe as default};
